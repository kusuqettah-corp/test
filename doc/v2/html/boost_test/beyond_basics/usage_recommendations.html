<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Usage recommendations</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../index.html" title="Boost.Test">
<link rel="up" href="../beyond_basics.html" title="The Unit Test Framework: beyond basics">
<link rel="prev" href="../../boost/unit_test/find_last_not_of_id377456.html" title="Function template find_last_not_of">
<link rel="next" href="../tutorials.html" title="Tutorials">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../boost/unit_test/find_last_not_of_id377456.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../beyond_basics.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../tutorials.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_test.beyond_basics.usage_recommendations"></a><a name="ref_usage_recommendations"></a><a class="link" href="usage_recommendations.html" title="Usage recommendations">Usage
      recommendations</a>
</h3></div></div></div>
<p>
        On following pages collected tips and recommendations on how to use and apply
        the &amp;utf; in your real life practice. You don't necessarily need to follow
        them, but I found them handy.
      </p>
<h4>
<a name="boost_test.beyond_basics.usage_recommendations.h0"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.general"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.general">General</a>
      </h4>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h1"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.prefer_offline_compiled_librarie"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.prefer_offline_compiled_librarie">Prefer
        offline compiled libraries to the inline included components</a>
      </h5>
<p>
        If you are just want to write quick simple test in environment where you
        never used Boost.Test before - yes, use included components. But if you plan
        to use Boost.Test on permanent basis, small investment of time needed to
        build (if not build yet), install and change you makefiles/project settings
        will soon return to you in a form of shorter compilation time. Why do you
        need to make your compiler do the same work over and over again?
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h2"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.if_you_use_only_free_function_ba"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.if_you_use_only_free_function_ba">If
        you use only free function based test cases advance to the automatic registration
        facility</a>
      </h5>
<p>
        It's really easy to switch to automatic registration. And you don't need
        to worry about forgotten test case
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h3"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.to_find_location_of_first_error_"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.to_find_location_of_first_error_">To
        find location of first error reported by test tool within reused template
        function, use special hook within framework headers</a>
      </h5>
<p>
        In some cases you are reusing the same template based code from within one
        test case (actually I recommend better solution in such case- see below).
        Now if an error gets reported by the test tool within that reused code you
        may have difficulty locating were exactly error occurred. To address this
        issue you could either a add <a class="link" href="../users_guide/test_output/test_output_macro_message.html" title="BOOST_TEST_MESSAGE"><code class="computeroutput"><span class="identifier">BOOST_TEST_MESSAGE</span></code></a> statements in
        templated code that log current type id of template parameters or you can
        use special hook located in <code class="computeroutput"><span class="identifier">unit_test_result</span><span class="special">.</span><span class="identifier">hpp</span></code> called
        <code class="computeroutput"><span class="identifier">first_failed_assertion</span><span class="special">()</span></code>.
        If you set a breakpoint right on the line where this function is defined
        you will be able to unroll the stack and see where error actually occurred.
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h4"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.to_test_reusable_template_base_c"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.to_test_reusable_template_base_c">To
        test reusable template base component with different template parameter use
        test case template facility</a>
      </h5>
<p>
        If you writing unit test for generic reusable component you may have a need
        to test it against set of different template parameter types . Most probably
        you will end up with a code like this:
      </p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">TestType</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">specific_type_test</span><span class="special">(</span> <span class="identifier">TestType</span><span class="special">*</span> <span class="special">=</span> <span class="number">0</span> <span class="special">)</span>
<span class="special">{</span>
  <span class="identifier">MyComponent</span><span class="special">&lt;</span><span class="identifier">TestType</span><span class="special">&gt;</span> <span class="identifier">c</span><span class="special">;</span>
  <span class="comment">// ... here we perform actual testing</span>
<span class="special">}</span>

<span class="keyword">void</span> <span class="identifier">my_component_test</span><span class="special">()</span>
<span class="special">{</span>
  <span class="identifier">specific_type_test</span><span class="special">(</span> <span class="special">(</span><span class="keyword">int</span><span class="special">*)</span><span class="number">0</span> <span class="special">);</span>
  <span class="identifier">specific_type_test</span><span class="special">(</span> <span class="special">(</span><span class="keyword">float</span><span class="special">*)</span><span class="number">0</span> <span class="special">);</span>
  <span class="identifier">specific_type_test</span><span class="special">(</span> <span class="special">(</span><span class="identifier">UDT</span><span class="special">*)</span><span class="number">0</span> <span class="special">);</span>
  <span class="comment">// ... </span>
<span class="special">}</span>
</pre>
<p>
        This is namely the situation where you would use test case template facility.
        It not only simplifies this kind of unit testing by automating some of the
        work, in addition every argument type gets tested separately under unit test
        monitor. As a result if one of types produce exception or non-fatal error
        you may still continue and get results from testing with other types.
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h5"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.prefer_boost_check_equal_to_boos"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.prefer_boost_check_equal_to_boos">Prefer
        <a class="link" href="../users_guide/testing_tools/testing_tool_ref/assertion_boost_level_eq.html" title="BOOST_&lt;level&gt;_EQUAL"><code class="computeroutput"><span class="identifier">BOOST_CHECK_EQUAL</span></code></a> to <a class="link" href="../users_guide/testing_tools/testing_tool_ref/assertion_boost_level.html" title="BOOST_&lt;level&gt;"><code class="computeroutput"><span class="identifier">BOOST_CHECK</span></code></a></a>
      </h5>
<p>
        Even though <a class="link" href="../users_guide/testing_tools/testing_tool_ref/assertion_boost_level.html" title="BOOST_&lt;level&gt;"><code class="computeroutput"><span class="identifier">BOOST_CHECK</span></code></a> tool is most generic
        and allows validating any <code class="computeroutput"><span class="keyword">bool</span></code>
        convertible expression, I would recommend using, if possible, more specific
        tools dedicated to the task. For example if you need you validate some variable
        vs. some expected value use <a class="link" href="../users_guide/testing_tools/testing_tool_ref/assertion_boost_level_eq.html" title="BOOST_&lt;level&gt;_EQUAL"><code class="computeroutput"><span class="identifier">BOOST_CHECK_EQUAL</span></code></a> instead. The main
        advantage is that in case of failure you will see the mismatched value -
        the information most useful for error identification. The same applies to
        other tools supplied by the framework.
      </p>
<h4>
<a name="boost_test.beyond_basics.usage_recommendations.h6"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.ide_usage_recommendations"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.ide_usage_recommendations">IDE
        usage recommendations</a>
      </h4>
<p>
        This recommendation is shown using Microsoft Visual Studio as an example,
        but you can apply similar steps in different IDEs.
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h7"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.use_custom_build_step_to_automat"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.use_custom_build_step_to_automat">Use
        custom build step to automatically start test program after compilation</a>
      </h5>
<p>
        I found it most convenient to put test program execution as a post-build
        step in compilation. To do so use project property page:
      </p>
<p>
        <span class="inlinemediaobject"><img src="../../../img/post_build_event.jpg"></span>
      </p>
<p>
        Full command you need in "Command Line" field is:
      </p>
<pre class="programlisting"><span class="string">"$(TargetDir)\$(TargetName).exe"</span> <span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/result_code.html#ref_param_result_code"><code class="computeroutput"><span class="identifier">result_code</span></code></a><span class="special">=</span><span class="identifier">no</span> <span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/report_level.html#ref_param_report_level"><code class="computeroutput"><span class="identifier">report_level</span></code></a><span class="special">=</span><span class="identifier">no</span>
</pre>
<p>
        Note that both report level and result code are suppressed. This way the
        only output you may see from this command are possible runtime errors. But
        the best part is that you could jump through these errors using usual keyboard
        shortcuts/mouse clicks you use for compilation error analysis:
      </p>
<p>
        <span class="inlinemediaobject"><img src="../../../img/post_build_out.jpg"></span>
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h8"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.if_you_got_fatal_exception_somew"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.if_you_got_fatal_exception_somew">If
        you got fatal exception somewhere within test case, make debugger break at
        the point the failure by adding extra command line argument</a>
      </h5>
<p>
        If you got "memory access violation" message (or any other message
        indication fatal or system error) when you run you test, to get more information
        of error location add
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/catch_system_errors.html#ref_param_catch_system"><code class="computeroutput"><span class="identifier">catch_system_error</span></code></a><span class="special">=</span><span class="identifier">no</span>
</pre>
<p>
        to the test run command line:
      </p>
<p>
        <span class="inlinemediaobject"><img src="../../../img/run_args.jpg"></span>
      </p>
<p>
        Now run the test again under debugger and it will break at the point of failure.
      </p>
<h4>
<a name="boost_test.beyond_basics.usage_recommendations.h9"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.command_line_usage_recommendatio"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.command_line_usage_recommendatio">Command
        line usage recommendations</a>
      </h4>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h10"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.if_you_got_fatal_exception_some0"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.if_you_got_fatal_exception_some0">If
        you got fatal exception somewhere within test case, make program generate
        coredump by adding extra command line argument</a>
      </h5>
<p>
        If you got "memory access violation" message (or any other message
        indication fatal or system error) when you run you test, to get more information
        about the error location add
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/catch_system_errors.html#ref_param_catch_system"><code class="computeroutput"><span class="identifier">catch_system_error</span></code></a><span class="special">=</span><span class="identifier">no</span>
</pre>
<p>
        to the test run command line. Now run the test again and it will create a
        coredump you could analyse using you preferable debugger. Or run it under
        debugger in a first place and it will break at the point of failure.
      </p>
<h5>
<a name="boost_test.beyond_basics.usage_recommendations.h11"></a>
        <span><a name="boost_test.beyond_basics.usage_recommendations.how_to_use_test_module_build_wit"></a></span><a class="link" href="usage_recommendations.html#boost_test.beyond_basics.usage_recommendations.how_to_use_test_module_build_wit">How
        to use test module build with Boost.Test framework under management of automated
        regression test facilities?</a>
      </h5>
<p>
        My first recommendation is to make sure that the test framework catches all
        fatal errors by adding argument
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/catch_system_errors.html#ref_param_catch_system"><code class="computeroutput"><span class="identifier">catch_system_error</span></code></a><span class="special">=</span><span class="identifier">yes</span>
</pre>
<p>
        to all test modules invocations. Otherwise test program may produce unwanted
        dialogs (depends on compiler and OS) that will halt you regression tests
        run. The second recommendation is to suppress result report output by adding
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/report_level.html#ref_param_report_level"><code class="computeroutput"><span class="identifier">report_level</span></code></a><span class="special">=</span><span class="identifier">no</span>
</pre>
<p>
        argument and test log output by adding
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/log_level.html#ref_param_log_level"><code class="computeroutput"><span class="identifier">log_level</span></code></a><span class="special">=</span><span class="identifier">nothing</span>
</pre>
<p>
        argument, so that test module won't produce undesirable output no one is
        going to look at anyway. I recommend relying only on result code that will
        be consistent for all test programs. An alternative to my second recommendation
        is direct both log and report to separate file you could analyse later on.
        Moreover you can make Boost.Test to produce them in XML format using
      </p>
<pre class="programlisting"><span class="special">--</span><a class="link" href="../users_guide/runtime_config/reference/output_format.html#ref_param_output_format"><code class="computeroutput"><span class="identifier">output_format</span></code></a><span class="special">=</span><span class="identifier">XML</span>
</pre>
<p>
        and use some automated tool that will format this information as you like.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2001-2014 Gennadiy
      Rozental<br>Copyright &#169; 2013, 2014 Raffi Enficiaud<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../boost/unit_test/find_last_not_of_id377456.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../beyond_basics.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../tutorials.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
